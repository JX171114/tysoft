<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
    <title>组织机构</title>
    <link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/common.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/select2/select2.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-validator/css/bootstrapValidator.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/skins/_all-skins.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/jvectormap/jquery-jvectormap-1.2.2.css}"/>
    <!-- datetime picker -->
    <link rel="stylesheet" th:href="@{/static/plugins/datetimepicker/css/bootstrap-datetimepicker.min.css}"/>
    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" th:href="@{/static/plugins/iCheck/all.css}"/>
    <!-- daterange picker -->
    <link rel="stylesheet" th:href="@{/static/plugins/daterangepicker/daterangepicker.css}"/>
    <!-- Theme style -->
    <link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/skins/_all-skins.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/common.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.css}"/>
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/datetimepicker/css/bootstrap-datetimepicker.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/datetimepicker/css/bootstrap-datetimepicker.min.css}"/>
    <style type="text/css">
        html, body {
            overflow-x: hidden;
        }

        body {
            padding-top: 5px;
        }

        .up_icon img {
            max-height: 100%;
        }

        .up_icon span {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            line-height: 20px;
            background: #8e8e8e;
            text-align: center;
            color: #fff;
            font-size: 12px;
            border-radius: 0px 0px 6px 6px;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .col-sm-10 span {
            word-break: break-all;
            word-wrap: break-word;
            white-space: normal;
            display: block;
            float: left;
            height: 34px;
            padding: 6px 12px 6px 0px;
            font-size: 14px;
            line-height: 1.42857143;
            color: #777;
        }
    </style>
</head>
<body>
<div class="container-fluid" style="width:100%; height: 100%">
    <div>
        <input type="hidden" id="now_user_lesseeId" name="lesseeId" th:value="${now_user_lesseeId}"/>
        <input type="hidden" id="now_user_useunitId" name="useunitId" th:value="${now_user_useunitId}"/>
        <input type="hidden" id="now_user_id" name="userId" th:value="${now_user_id}"/>
        <!--角色选择成员条件表格-->
        <form id="roleSysuserOrgFormSearch" type="hidden" class="form-horizontal">
            <input type="hidden" name="sysuserId" th:value="${now_user_id}"/>
            <input type="hidden" id="role_edit_sysuser_useunit" name="useunitId"/>
        </form>
    </div>
    <!-- 左侧组织架构、角色树信息-->
    <div class="col-sm-3">
        <!-- 搜索框-->
        <!--<div class="row">-->
            <!--<input type="text" name="q" class="form-control" placeholder="搜索"/>-->
        <!--</div>-->

        <div class="row">
            <div class="nav-tabs-custom">
                <!-- Tabs within a box -->
                <ul class="nav nav-tabs">
                    <li class="active" onclick="changeView('org')"><a href="#revenue-chart" data-toggle="tab">组织架构</a></li>
                    <li onclick="changeView('role')"><a href="#sales-chart" data-toggle="tab">角色</a></li>
                </ul>
                <div class="tab-content no-padding">
                    <!-- Morris chart - Sales -->
                    <div class="tab-pane active" id="revenue-chart">
                        <div>
                            <div class="box-header with-border" style="background-color: #d2d6de;">
                                <h3 class="box-title"><i class="fa fa-user"></i>&nbsp;&nbsp;组织架构</h3>
                            </div>
                        </div>
                        <!-- 组织架构树-->
                        <div class="" id="org_tree_content" style="overflow: auto">
                            <div id="orgMenuTree" data-toggle="context" data-target="#org-context-menu"></div>
                        </div>
                    </div>
                    <div class="tab-pane" id="sales-chart">
                        <!-- 角色信息树-->
                        <div class="" id="role_tree_content" style="overflow: auto;">
                            <!--<div class="row">-->
                                <!--<div class="col-md-4 col-md-offset-1">-->
                                    <!--<button id="btn_add_role_group" type="button" class="btn btn-default btn-primary"-->
                                            <!--onclick="goEditRoleGroup()">-->
                                        <!--<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新建角色组-->
                                    <!--</button>-->
                                <!--</div>-->
                                <!--<div class="col-md-4 col-md-offset-1">-->
                                    <!--<button id="btn_add_role" type="button" class="btn btn-default btn-primary" onclick="goEditRole(null)">-->
                                        <!--<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新建角色-->
                                    <!--</button>-->
                                <!--</div>-->
                            <!--</div>-->
                            <div>
                                <div class="box-header with-border" style="background-color: #d2d6de;">
                                    <h3 class="box-title"><i class="fa fa-user"></i>&nbsp;&nbsp;角色</h3>
                                </div>
                            </div>
                            <div id="roleMenuTree" data-toggle="context" data-target="#role-context-menu"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 右侧组织架构、角色表格信息-->
    <div class="col-sm-9">
        <!-- 组织架构表格-->
        <div id="orgTable">
            <div class="box box-default collapsed-box box-solid" style="margin-bottom:5px;">
                <div class="box-header with-border">
                    <h3 class="box-title" id="orgName">组织架构</h3>
                    <form id="formSearch" type="hidden" class="form-horizontal">
                        <input type="hidden" id="orgId" name="useunit.id"/>
                    </form>
                </div>
            </div>
            <div id="toolbar" class="btn-group">
                <button id="btn_add_member" type="button" class="btn btn-default btn-primary" disabled="disabled"
                        onclick="goAddSysuer()">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增成员
                </button>
                <button id="btn_delete_member" type="button" class="btn btn-default btn-danger" disabled="disabled" onclick="disableSysuser()">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>批量禁用
                </button>
            </div>
            <table id="orgTableContent"></table>
        </div>
        <!-- 角色表格信息-->
        <div id="roleTable">
            <input type="hidden" id="role_sysuser_roleid"/>
            <div class="box box-default collapsed-box box-solid" style="margin-bottom:5px;">
                <div class="box-header with-border">
                    <h3 class="box-title" id="roleName">角色</h3>
                    <form id="rold_formSearch" type="hidden" class="form-horizontal">
                        <input type="hidden" id="roleId" name="roleId"/>
                        <input type="hidden" id="roleType" name="roleType"/>
                        <input type="hidden" name="lesseeId" th:value="${now_user_lesseeId}"/>
                    </form>
                </div>
            </div>
            <div id="role_toolbar" class="btn-group">
                <button id="btn_add_role_member" type="button" class="btn btn-default btn-primary" disabled="disabled" onclick="goEditRoleSysuser()">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>编辑成员
                </button>
            </div>
            <table id="roleTableContent"></table>
        </div>
    </div>

    <!-- 组织架构右键菜单-->
    <div id="org-context-menu">
        <ul class="dropdown-menu" role="menu">
            <!-- 添加子公司、添加子部门、修改公司、修改部门、上移、下移、删除-->
            <li><a tabindex="-1" id="synchronize"><em id="synchronize" class="glyphicon glyphicon-refresh"></em>同步UUV组织</a></li>
            <li><a tabindex="-1" id="addCompany"><em id="addCompany" class="glyphicon glyphicon-plus"></em>添加子公司</a>
            </li>
            <li><a tabindex="-1" id="editCompany"><em id="editCompany" class="glyphicon glyphicon-pencil"></em>修改公司</a>
            </li>
            <li><a tabindex="-1" id="addDept"><em id="addDept" class="glyphicon glyphicon-plus"></em>添加子部门</a></li>
            <li><a tabindex="-1" id="editDept"><em id="editDept" class="glyphicon glyphicon-pencil"></em>修改部门</a></li>
            <!--<li><a tabindex="-1" id="downMenu"><em id="downMenu" class="glyphicon glyphicon-arrow-down"></em>下移</a></li>-->
            <!--<li><a tabindex="-1" id="upMenu"><em id="upMenu" class="glyphicon glyphicon-arrow-up"></em>上移</a></li>-->
            <li><a tabindex="-1" id="removeMenu"><em id="removeMenu" class="glyphicon glyphicon-remove"></em>删除</a></li>
            <!-- 编辑角色、删除角色-->
            <li><a tabindex="-1" id="addRole"><em id="addRole" class="glyphicon glyphicon-pencil"></em>新增角色</a></li>
            <li><a tabindex="-1" id="editRole"><em id="editRole" class="glyphicon glyphicon-pencil"></em>编辑角色</a></li>
            <li><a tabindex="-1" id="removeRole"><em id="removeRole" class="glyphicon glyphicon-remove"></em>删除</a></li>
        </ul>
    </div>
</div>

<!-- 模态窗体-->

<!-- 添加、编辑公司 -->
<div class="modal fade" id="useunit_edit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 id="add_company_titile" class="modal-title">新建子公司</h4>
            </div>
            <div class="modal-body">
                <form id="useunitForm" role="form" method="post" class="form-horizontal">
                    <input type="hidden" name="id"/>
                    <input type="hidden" name="manageType" value="1"/>
                    <input type="hidden" name="parentId"/>
                    <input type="hidden" name="lesseeId"/>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="useunit_name">公司类型<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <select class="form-control" name="useunitType.id">
                                <option value="">请选择类型</option>
                                <option th:each="utype : ${useunitTypes}" th:value="${utype.id}"
                                        th:text="${utype.typeName}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="useunit_name">公司名称<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="useunit_name" name="name" type="text" class="form-control"
                                   placeholder="企业名称不能超过20个字"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="useunit_shortName">公司简称<font
                                color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="useunit_shortName" name="shortName" type="text" class="form-control"
                                   placeholder="企业简称不能超过20个字"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">备&nbsp;&nbsp;&nbsp;注&nbsp;</label>
                        <div class="col-sm-9">
                            <input name="remark" type="text" class="form-control" placeholder="企业备注"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSaveUseunit(this)">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 同步UUV组织-->
<div class="modal fade" id="sync_uuv_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="sync_uuv_title">同步UUV组织</h4>
            </div>
            <div class="modal-body">
                <form id="uuvForm" role="form" method="post" class="form-horizontal">
                    <div class="form-group">
			        	<label class="col-sm-3 control-label search_div" style="width: 100px;">更新时间:</label>
			            <div class="col-sm-4 search_div" style="width: 170px;">
			                <div class="input-group date">
		                    	<input type="text" class="form-control datetimepicker" id="s_time" name="s_time"/>
				            </div>
			            </div>
			            <label class="col-sm-1 control-label" style="width: 26px;align-content: center;">-</label>
			            <div class="col-sm-4 search_div" style="width: 170px;">
			                <div class="input-group date">
			                    <input type="text" class="form-control datetimepicker" id="e_time" name="e_time"/>
					        </div>
			            </div>
			        </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSyncUUV(this)">确定</button>
            </div>
        </div>
    </div>
</div>

<!-- 添加、编辑部门-->
<div class="modal fade" id="dept_edit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="dept_mode_title">新增部门</h4>
            </div>
            <div class="modal-body">
                <form id="deptForm" role="form" method="post" class="form-horizontal">
                    <input type="hidden" name="id"/>
                    <input type="hidden" name="manageType" value="1"/>
                    <input type="hidden" name="parentId"/>
                    <input type="hidden" name="lesseeId"/>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="dept_name">部门名称<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="dept_name" name="name" type="text" class="form-control"
                                   placeholder="部门名称不能超过32个字"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSaveDept(this)">保存</button>
            </div>
        </div>
    </div>
</div>

<!--删除公司、部门提示框-->
<div class="modal fade" id="delete_useunit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="delete_useunit_title">删除部门</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <input type="hidden" id="delete_useunit_id"/>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <h4 id="delete_useunit_tip">确认删除部门？</h4>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <h5>没有子部门且没有成员的部门才可以被删除。</h5>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="deleteUseunit()">确定</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 添加用户-->
<div class="modal fade" id="sysuser_add_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true" style="overflow: auto">
    <div class="modal-dialog" >
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 id="add_sysuser_title" class="modal-title">新建用户</h4>
            </div>
            <div class="modal-body">
                <form id="sysuserForm" role="form" method="post" class="form-horizontal">
                    <input type="hidden" id="edit_sysuser_id" name="id"/>
                    <input type="hidden" name="lesseeId" th:value="${now_user_lesseeId}"/>
                    <!--<div class="form-group">-->
                        <!--<label class="col-sm-3 control-label" for="sysuser_img">用户头像</label>-->
                        <!--<div class="col-sm-9" style="line-height: 80px;">-->
                            <!--<input type="hidden" name="sysuser.img"/>-->
                            <!--<div id="sysuser_img" class="up_icon" onclick="fnSelectSysuserImg()">-->
                                <!--<input type="file" id="sysuser_photo_file" style="display: none;"/>-->
                                <!--<img th:src="@{/static/images/u331.png}" class="img-rounded"/>-->
                                <!--<span>上传头像</span>-->
                            <!--</div>-->
                            <!--<span class="col-sm-10-span"-->
                                  <!--style="padding: 50px 0 0 10px;">建议上传图片尺寸为640*640，大小不超过200KB</span>-->
                        <!--</div>-->
                    <!--</div>-->
                    <div id="edit_sysuser_count_info">
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="sysuser_loginName">账号<font
                                    color="red">*</font></label>
                            <div class="col-sm-9">
                                <input id="sysuser_loginName" name="loginName" type="text" class="form-control"
                                       placeholder="账号需由英文字母或数字组成"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="sysuser_password">密码</label>
                            <div class="col-sm-9">
                                <input id="sysuser_password" name="loginPwd" type="password" class="form-control"
                                       placeholder="新建用户时,为空默认密码6"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="sysuser_surepwd">确认密码</label>
                            <div class="col-sm-9">
                                <input id="sysuser_surepwd" name="sureloginPwd" type="password" class="form-control"/>
                            </div>
                        </div>
                    </div>

                    <h4>基本信息</h4>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="sysuser_name">姓名<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="sysuser_name" name="name" type="text" class="form-control"
                                   placeholder="用户名称不能超过20个字"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="sysuser_mobile">手机号</label>
                        <div class="col-sm-9">
                            <input id="sysuser_mobile" name="mobile" type="text" class="form-control"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="sysuser_select_dept_text">部门<font
                                color="red">*</font></label>
                        <div class="col-sm-9">
                            <input type="hidden" id="sysuser_select_dept_id" name="useunitId"/>
                            <input type="text" id="sysuser_select_dept_text" name="sysuserDept" class="form-control" readonly="true"
                                   onclick="$('#sysuser_select_dept_tree_div').show()" placeholder="用户所属部门"/>
                            <div id="sysuser_select_dept_tree_div" style="display: none;">
                                <div id="sysuser_select_dept_tree">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <input id="sysuser_role_ids" name="roleIds" type="hidden"/>
                        <input id="sysuser_role_names" name="roleNames" type="hidden"/>
                        <label class="col-sm-3 control-label">角色</label>
                        <div class="col-sm-9">
                            <div class="box box-default box-solid" style="margin-bottom:5px; min-height: 100px"
                                 onclick="sysuserSelectRole()">
                                <div class="box-body" id="sysuser_selected_role"></div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" >
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSaveSysuser(this)">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 编辑角色下属用户-->
<div class="modal fade" id="role_edit_sysuser_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog" style="width:800px;">
        <div class="modal-content">
            <div class="modal-header" style="text-align: center;background-color: #357ca5;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" style="color:white;">选择成员</h4>
            </div>
            <div class="modal-body" style="padding: 10px;">
                <form class="form-horizontal" id="role_edit_sysuser_form">
                    <input type="hidden" id="role_edit_sysuser_ids"/>
                    <div class="box box-default box-solid" style="margin-bottom:5px; min-height: 100px">
                        <div class="box-body" id="role_edit_sysuser_user_name"></div>
                    </div>
                    <div class="box box-default box-solid" style="margin-bottom:5px;">
                        <div class="box-body">
                            <div class="col-sm-6" id="orgtree_div" style="overflow: auto;">
                                <div id="role_edit_sysuser_orgtree"></div>
                            </div>
                            <div class="col-sm-6">
                                <table id="role_edit_sysuser_orgusertable"></table>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" onclick="goSaveRoleSysuser(this)" class="btn btn-primary">完成</button>
            </div>
        </div>
    </div>
</div>

<!-- 新建角色组-->
<div class="modal fade" id="roleGroup_edit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="roleGroup_mode_title">新建角色组</h4>
            </div>
            <div class="modal-body">
                <form id="roleGroupForm" role="form" method="post" class="form-horizontal">
                    <input type="hidden" name="lesseeId" th:value="${now_user_lesseeId}"/>
                    <input type="hidden" name="useunitId" th:value="${now_user_useunitId}"/>
                    <input type="hidden" name="userId" th:value="${now_user_id}"/>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="roleGroup_name">角色组<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="roleGroup_name" name="roleGroupName" type="text" class="form-control"
                                   placeholder="角色组名称不能超过20个字"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSaveRoleGroup(this)">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 新建角色-->
<div class="modal fade" id="role_edit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="role_form_title">新建角色</h4>
            </div>
            <div class="modal-body">
                <form id="roleForm" role="form" method="post" class="form-horizontal">
                    <input type="hidden" id="role_form_lessedId" name="lesseeId" th:value="${now_user_lesseeId}"/>
                    <input type="hidden" id="role_form_useunitId" name="useunitId" th:value="${now_user_useunitId}"/>
                    <input type="hidden" name="userId" th:value="${now_user_id}"/>
                    <input type="hidden" id="role_form_role_id" name="roleId"/>
                    <input type="hidden" id="role_parent_id" name="parentId"/>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="role_name">角色名称<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="role_name" name="roleName" type="text" class="form-control"
                                   placeholder="角色名称不能超过20个字"/>
                        </div>
                    </div>
                    <!--<div class="form-group">-->
                        <!--<label class="col-sm-3 control-label">角色分组<font color="red">*</font></label>-->
                        <!--<div class="col-sm-9">-->
                            <!--<select class="form-control" id="role_group_ids" name="roleGroupId">-->
                                <!--<option value="">请选择角色分组</option>-->
                            <!--</select>-->
                        <!--</div>-->
                    <!--</div>-->
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="role_select_dept_text">部门<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input type="hidden" id="role_select_dept_id" name="roleDeptId"/>
                            <input type="text" id="role_select_dept_text" name="roleDept" class="form-control" readonly="true"
                                   onclick="$('#role_select_dept_tree_div').show()" placeholder="请选择角色所属部门"/>
                            <div id="role_select_dept_tree_div" style="display: none;">
                                <div id="role_select_dept_tree">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <input id="role_auth_ids" name="authIds" type="hidden"/>
                        <input id="role_auth_names" name="authNames" type="hidden"/>
                        <label class="col-sm-3 control-label">权限</label>
                        <div class="col-sm-9">
                            <div class="box box-default box-solid" style="margin-bottom:5px; min-height: 150px"
                                 onclick="roleSelectAuth()">
                                <div class="box-body" id="selected_auth"></div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSaveRole(this)">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 角色选择权限-->
<div class="modal fade" id="role_select_auth_modal" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog" style="width:800px;">
        <div class="modal-content">
            <div class="modal-header" style="text-align: center;background-color: #357ca5;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" style="color:white;">选择权限</h4>
            </div>
            <div class="modal-body" style="padding: 10px;">
                <form class="form-horizontal" id="role_select_auth_form">
                    <div class="box box-default box-solid" style="margin-bottom:5px; min-height: 100px">
                        <div class="box-body" id="role_select_authids"></div>
                    </div>
                    <div class="box box-default box-solid" style="margin-bottom:5px;">
                        <div class="box-header with-border">
                            <h3 class="box-title">待选择权限</h3>
                        </div>
                        <div class="box-body">
                            <div id="authMenuTree" data-toggle="context"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button id="btnSubmit" type="button" onclick="doSaveRoleAuth()" class="btn btn-primary">完成</button>
            </div>
        </div>
    </div>
</div>

<!-- 用户选择角色 -->
<div class="modal fade" id="sysuser_select_role_modal" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog" style="width:800px;">
        <div class="modal-content">
            <div class="modal-header" style="text-align: center;background-color: #357ca5;">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" style="color:white;">选择角色</h4>
            </div>
            <div class="modal-body" style="padding: 10px;">
                <form class="form-horizontal" id="sysuser_select_role_form">
                    <div class="box box-default box-solid" style="margin-bottom:5px; min-height: 100px">
                        <div class="box-body" id="sysuser_select_roleids"></div>
                    </div>
                    <div class="box box-default box-solid" style="margin-bottom:5px;">
                        <div class="box-header with-border">
                            <h3 class="box-title">待选择角色</h3>
                        </div>
                        <div class="box-body">
                            <div id="sysuserRoleTree" data-toggle="context"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" onclick="doSaveSysuserRole()" class="btn btn-primary">完成</button>
            </div>
        </div>
    </div>
</div>

<!--删除角色-->
<div class="modal fade" id="delete_role_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" >删除角色</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <input type="hidden" id="delete_role_id"/>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <h4>确认删除角色？</h4>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <h5>没有子角色且没有成员的角色才可以被删除。</h5>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="deleteRole()">确定</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

</body>
<script type="text/javascript" th:src="@{/static/plugins/jQuery/jquery-2.2.3.min.js}"></script>
<script type="text/javascript" th:src="@{/static/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/select2/select2.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/common.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-contextmenu/bootstrap-contextmenu.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-contextmenu/prettify.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/attention/zDialog/zDrag.js}"></script>
<!--<script type="text/javascript" th:src="@{/static/plugins/attention/zDialog/zDialog.js}"></script>-->
<scriptm type="text/javascript" th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></scriptm>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/locale/bootstrap-table-zh-CN.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/jQuery/jquery.serializejson.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/datetimepicker/js/bootstrap-datetimepicker.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/extensions/export/bootstrap-table-export.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/extensions/export/tableExport.js}"></script>
<script type="text/javascript" th:inline="javascript">
    var CTX = [[@{/}]];
        var STATIC = [[@{/static/}]];
</script>
<script type="text/javascript" th:src="@{/static/modules/base/organization-manage.js}"></script>
</html>