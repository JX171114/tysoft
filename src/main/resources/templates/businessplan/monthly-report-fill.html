<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--
* @Copyright(c): 厦门路桥信息股份有限公司  版权所有
* @author :XMRBI
* @Description:月度经营快报填报
* @createDate:2018-7-5
-->
<head>
	<meta charset="UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
	<title>月度经营快报填报</title>
	<link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/common.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/select2/select2.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-validator/css/bootstrapValidator.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/skins/_all-skins.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/jvectormap/jquery-jvectormap-1.2.2.css}"/>
    <!-- Theme style -->
	<link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.min.css}"/>
	<link rel="stylesheet" th:href="@{/static/dist/css/skins/_all-skins.min.css}"/>
	<link rel="stylesheet" th:href="@{/static/css/common.css}"/>
	<!-- Bootstrap 3.3.7 -->
	<link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
	<link rel="stylesheet" th:href="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.css}"/>
	<!-- bootstrap datepicker -->
  	<link rel="stylesheet" th:href="@{/static/plugins/datepicker/datepicker3.css}"/>
	<style type="text/css">
	.panel {
	  margin-bottom: 0px;
	}
	.form-group {
	  margin-bottom: 2px;
	}
	
	</style>
	<style type="text/css">
        html, body {
            overflow-x: hidden;
        }

        body {
            padding-top: 5px;
        }
        
        .box.box-solid.box-default>.box-header {
        	background-color: #DEF2FF;
        }
        
        .box.box-solid>.box-header .btn.btn-default{    
			background-color: #4A90E2;
		  	border-color: #4A90E2;
		  	color:#fff;
		}

        .col-sm-10 span {
            word-break: break-all;
            word-wrap: break-word;
            white-space: normal;
            display: block;
            float: left;
            height: 34px;
            padding: 6px 12px 6px 0px;
            font-size: 14px;
            line-height: 1.42857143;
            color: #777;
        }
        
		.search_div{
			padding: 0px;
			font-family: serif;
			/* line-height: 34px;
			margin-bottom: 0px; */
		}
		
		.list-group-item{
			padding: 5px 5px;
		}
		
		#search_div{
			padding: 0px;
		}
		
		#search_div .btn.btn-default{
			background-color: #fff;
		  	border-color: gray;
		  	color:#000;
		}
		
		.modal-header{
			background-color:#F4F6F8;
			border-top-left-radius: 5px;
			border-top-right-radius: 5px;
		}
		
		a{
			font-weight: bold;
			color: #000;
		}
		
    </style>
</head>
<body>
	<div class="container-fluid" style="width: 100%; height: 100%" id="divBox" data-toggle="context" data-target="#context-menu">
	<input id="isIssued" hidden="hidden" th:value="${isIssued}" />
			<div class="box box-default collapsed-box box-solid" style="margin-bottom: 5px;border-color: #DEF2FF;" >
				<div class="box-header with-border">
				<form id="formSearch" class="form-horizontal">
					<div id="btn_div" class="" style="margin-bottom: 5px;">
			            <button th:if="${isIssued == '1'}" id="btn_issued" type="button" class="btn btn-default btn-primary" onclick="toIssuedReport()">
			                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>经营快报下发
			            </button>
			            &emsp;
			            <button th:if="${isIssued == '1'}" id="btn_copy" type="button" class="btn btn-default btn-primary" onclick="copyLastMonthIndicator()">
			                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>复制上月经营指标
			            </button>
			        </div>
			        <div id="search_div" class="col-md-12">
		                <div class="col-md-4" style="padding-right: 0px;">
	            			<div class="form-group">
			                  	<label class="col-sm-3 control-label search_div" style="width: 40px;">标题:</label>
			                  	<div class="col-sm-9 search_div" style="width: 260px;">
		                    	 	<input type="text" class="form-control" id="reportTitle" name="reportTitle" value="" />
			                  	</div>
			                </div>
	            		</div>
		                <div class="col-md-3" style="padding: 0px;">
	            			<div class="form-group">
			                  	<label class="col-sm-3 control-label search_div" style="width: 75px;">填报部门:</label>
			                  	<div class="col-sm-9 search_div" style="width: 170px;">
		                    	 	<select class="form-control" name="fillDepartmentId" id="fillDepartmentId">
			                    	 	<option th:if="${isIssued == '1'}" value=""></option>
			                    	 	<option th:each="useunit : ${useunits}" th:value="${useunit.id}" th:text="${useunit.name}"></option>
			                    	</select>
			                  	</div>
			                </div>
	            		</div>
	            		<div class="col-md-3" style="padding: 0px;">
	            			<div class="form-group">
	            				<input hidden="hidden" name="status" />
			                  	<label class="col-sm-3 control-label search_div" style="width: 40px;">状态:</label>
			                  	<div class="col-sm-9 search_div" style="height: 34px;line-height: 34px;width: 250px;">
									<input type="radio" id="status_0" name="statusRadio" value="0" />在办
									<input type="radio" id="status_1" name="statusRadio" value="1" />完成
									<input type="radio" id="status_2" name="statusRadio" value="2" />逾期完成
									<input type="radio" id="status_4" name="statusRadio" value="4" />审核通过
			                  	</div>
			                </div>
	            		</div>
	            		<div class="col-md-2 btn-group" style="padding: 0px;">
					    	<button id="btn_add" type="button" class="btn btn-default" onclick="queryInfo();">
					        	<span class="glyphicon glyphicon-search" aria-hidden="true" style="color: #18A689"></span>查询
					        </button>
					        <button id="btn_edit" type="button" class="btn btn-default" onclick="resetParams();">
					            <span class="glyphicon glyphicon-repeat" aria-hidden="true" style="color: #EC4758"></span>重置
					        </button>
	            		</div>
			        </div>
			    </form>
				</div>
			</div>

			<table id="dataList"></table>
		<!-- </div> -->
		
		<!-- 右键菜单 -->
	    <div id="context-menu">
	        <ul class="dropdown-menu" role="menu">
	            <li><a tabindex="-1" id="refresh"><em id="" class="glyphicon glyphicon-refresh"></em>刷新</a>
	            </li>
	        </ul>
	    </div>
		
	</div>
	
	<!-- 经营指标选择modal框 -->
	<div class="modal fade" id="issuedModal" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" aria-hidden="true">
		<div class="modal-dialog" role="document" >
			<div class="modal-content">
				<div class="modal-header">
				 	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h4 id="modal_title" class="modal-title" style="color: blue;">请选择需要下发填报的经营指标</h4>
				</div>
				<div class="modal-body" style="overflow: hidden; padding: 10px;">
					<div class="col-md-9">
						<label style="margin-bottom: 0px;line-height: 34px;font-size: 16px;">经营指标项目目录：</label>
					</div>
					<div class="col-md-3">
						<input id="selectAll" type="checkbox" style="margin: 0px;line-height: 34px;"/>
						<span style="line-height: 34px;">全选</span>
					</div>
					<div class="col-sm-12">
				        <!-- 项目列表树-->
				         <div class="row" id="menuTreePanel" style="overflow: auto;">
				             <div id="MenuTree"></div>
				         </div>
				    </div>
				</div>
				<div class="modal-footer" style="text-align: center;">
					 <button id="btnSubmit" type="button" onclick="toSelectMonth()" class="btn btn-primary" style="width:80px;">确定</button>
					 <button type="button" class="btn btn-default" data-dismiss="modal" style="width:80px;">取消</button> 
				</div>
			</div>
		</div>
		
	</div>
	
	<!-- 快报月份modal框 -->
	<div class="modal fade" id="dateModal" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" aria-hidden="true">
		<div class="modal-dialog" role="document" >
			<div class="modal-content">
				<div class="modal-header">
				 	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h4 id="modal_title" class="modal-title" style="color: blue;">请选择经营快报月份</h4>
				</div>
				<div class="modal-body" style="overflow: hidden; padding: 10px;">
				<form id="businessReportForm" class="form-horizontal">
					<input hidden="hidden" name="indicatorIds" value="" />
            		<div class="col-md-12">
            			<div class="form-group">
		                  	<label class="col-sm-4 control-label">经营快报填报月份:</label>
		                  	<div class="col-sm-8">
		                  		<div class="input-group date">
				                  	<input type="text" class="form-control datepicker" readonly="readonly" name="reportMonth"/>
				                  	<div class="input-group-addon">
				                    	<i class="fa fa-calendar"></i>
				                  	</div>
				                </div>
		                  	</div>
		                </div>
            		</div>
            	</form>
				</div>
				<div class="modal-footer" style="text-align: center;">
					 <button type="button" onclick="createReport()" class="btn btn-primary">确定生成快报</button>
					 <button type="button" onclick="cancelCreate()" class="btn btn-default">取消生成快报</button> 
				</div>
			</div>
		</div>
	</div>
</body>
<!-- jQuery 2.2.3 -->
<script th:src="@{/static/plugins/jQuery/jquery-2.2.3.min.js}"></script>
<!-- Bootstrap 3.3.7 -->
<script th:src="@{/static/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/static/js/common.js}"></script>
<script th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></script>
<script th:src="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.js}"></script>
<script th:src="@{/static/plugins/bootstrap-table/dist/locale/bootstrap-table-zh-CN.min.js}"></script>
<script th:src="@{/static/plugins/jQuery/jquery.serializejson.min.js}"></script>
<script th:src="@{/static/plugins/datepicker/bootstrap-datepicker.js}"></script>
<script th:src="@{/static/plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.js}"></script>
<script th:src="@{/static/plugins/bootstrap-table/dist/extensions/export/bootstrap-table-export.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-contextmenu/bootstrap-contextmenu.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-contextmenu/prettify.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/attention/zDialog/zDrag.js}"></script>
<!-- Slimscroll -->
<script type="text/javascript" th:src="@{/static/plugins/slimScroll/jquery.slimscroll.min.js}"></script>
<script type="text/javascript" th:src="@{/static/dist/js/app.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/common.js}"></script>
<script type="text/javascript" th:src="@{/static/js/myModalDialogBR.js}"></script>
<script th:inline="javascript" type="text/javascript">
/*<![CDATA[*/
	var CTX = [[@{/}]];
	
	$(function () {
	    //1.初始化Table
	    var oTable = new TableInit();
	    oTable.Init();
	    //2.初始化Button的点击事件
	    var oButtonInit = new ButtonInit();
	    oButtonInit.Init();
	    //初始化时间控件
	    $('.datepicker').datepicker({
	    	format:'yyyy-mm',
	    	language:'zh-CN',
	      	autoclose: true,
	      	startView: 'months', //开始视图层，为月视图层
	        maxViewMode:'years', //最大视图层，为年视图层
	        minViewMode:'months', //最小视图层，为月视图层
	    }).on('hide',function(){
			
		});
	    
	    initContextmenu();
	    $('#menuTreePanel').height(350);
	  	//初始化项目列表树
	    initMenuTree();
	    
	  	//模态窗口关闭事件
		$('#issuedModal').on('hidden.bs.modal', function (e) {
			var selectAll = document.getElementById('selectAll');
			selectAll.checked = false;
			$('#MenuTree').treeview('uncheckAll', { silent:true });
		});
	  	
		$("#selectAll").change(function () {
		    if($(this).is(':checked')){
		    	$('#MenuTree').treeview('checkAll', { silent:true });
		    }else{
		    	$('#MenuTree').treeview('uncheckAll', { silent:true });
		    }
		});
		
	});
	
	//初始化右键菜单
    function initContextmenu() {
        $('#divBox').contextmenu({
            target: '#context-menu',
            before: function (e, context) {
               	$('#refresh').show();
            },
            onItem: function (context, e) {
                var operId = e.target.getAttribute('id');
                if(operId == 'refresh'){
                	refresh();
                }
            }
        });
    }
	
	
	//初始化列表
	var TableInit = function () {
	    var oTableInit = new Object();
	    //初始化Table
	    oTableInit.Init = function () {
	        $('#dataList').bootstrapTable({
	        	url: CTX + 'business-report/query-business-report-page', //请求后台的URL（*）
	            method: 'get',                      //请求方式（*）
	            striped: true,                      //是否显示行间隔色
	            cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
	            pagination: true,                   //是否显示分页（*）
	            sortable: false,                     //是否启用排序
	            sortOrder: "asc",                   //排序方式
	            queryParams: oTableInit.queryParams,//传递参数（*）
	            sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
	            pageNumber:1,                       //初始化加载第一页，默认第一页
	            pageSize: 10,                       //每页的记录行数（*）
	            pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
	            queryParamsType: "a",
	            strictSearch: true,
	            minimumCountColumns: 2,             //最少允许的列数
	            height:$(window).height()-110,	    //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
	            uniqueId: "id",                     //每一行的唯一标识，一般为主键列
	            undefinedText: "",
	            columns: [
				{
				    field: 'number',
				    title:'序号',
				    align : 'center',
				    sortable:true,
				    formatter:function(value,row,index){
				    	var pageSize=$('#dataList').bootstrapTable('getOptions').pageSize;
		                var pageNumber=$('#dataList').bootstrapTable('getOptions').pageNumber;
		                return pageSize * (pageNumber - 1) + index + 1;
				    }
				},{
				    field: 'reportTitle',
				    title:'标题',
				    align : 'center',
				    sortable:true,
				    formatter:function(v,r,i){
						return '<a href="javascript:fnFillReport(\'' + r.id + '\',\''+ r.status + '\')">'+ r.reportTitle +'</a>';
	   				}
				},{
				    field: 'fillDepartment',
				    title:'填报部门',
				    align : 'center',
				    sortable:true
				},{
				    field: 'fillPerson',
				    title:'填报人',
				    align : 'center',
				    sortable:true
				},{
				    field: 'issuedDate',
				    title:'下发时间',
				    align : 'center',
				    sortable:true
				},{
				    field: 'requiredTime',
				    title:'要求填报完成时间',
				    align : 'center',
				    sortable:true
				},{
				    field: 'actualTime',
				    title:'实际填报时间',
				    align : 'center',
				    sortable:true
				},{
				    field: 'status',
				    title:'状态',
				    align : 'center',
				    sortable:true,
				    formatter:function(value){
				    	if(value == '0'){
				    	    return '在办';
				    	}else if(value == '1') {
				    		return '完成';
				    	}else if(value == '2'){
				    		return '逾期完成';
				    	}else if(value == '4'){
				    		return '审核通过';
				    	}
				    }
				},]
	        });
	    };

	    //得到查询的参数
	    oTableInit.queryParams = function (params) {
	        var temp = {   //这里的键的名字和控制器的变量名必须一致，这边改动，控制器也需要改成一样的
	    		isParent: 0,
	        	pageNum: params.pageNumber,//页码params.offset
                size: params.pageSize,//页面大小params.limit
                reportTitle: $("#reportTitle").val(),
                fillDepartmentId: $("#fillDepartmentId").val(),
                status: $("input[name='statusRadio']:checked").val()
	        };
	        return temp;
	    };
	    return oTableInit;
	};
	
	//初始化按钮
	var ButtonInit = function () {
	    var oInit = new Object();
	    var postdata = {};

	    oInit.Init = function () {
	        //初始化页面上面的按钮事件
	    };

	    return oInit;
	};
	
	//查询-刷新
	var queryInfo = function(){
		var data = JSON.stringify($('#formSearch').serializeJSON());
		var queryData = {from: data};
		$('#dataList').bootstrapTable('refreshOptions',{pageNumber:1,pageSize:10,query:queryData});
	}
	
	//初始化项目列表树
    function initMenuTree() {
    	var r = Math.random().toString().substring(5);
        $.ajax({
            url: CTX + 'business-indicator/query-indicator-tree?Mathnum=' + r,
            method: 'GET',
            dataType: 'json',
            data: {selectable:false},
            success: function (json) {
            	/* var treedata = [{
					id:0,
			    	text: "项目目录",
			    	treeCode:'0',
			    	enable: true,
			    	icon:"",
			    	selectable:false,
			    	nodeType:"typeProject",
			    	nodes:json
			  	}]; */
                $('#MenuTree').treeview({
                    showTags: true,
                    data:json,
                    state: {
                    	 checked: true
                    },
                    showCheckbox: true,
                    onNodeChecked: function (event, node) {
                        //级联选中父节点
                        checkPartenNode(node);
                        //级联选中节节点
                        checkSubNode(node);
                    },
                    onNodeUnchecked: function (event, node) {
                        uncheckSubNode(node);
                    }
                });
                $('#MenuTree').treeview('expandAll');
                loaded();
            },
            error: function () {
                loaded();
                alert('请求超时或系统出错');
            }
        });
    }
	
  //级联选中权限子节点
    function checkSubNode(node) {
        if(!node.state.checked){
            $('#MenuTree').treeview('checkNode',node.nodeId,{silent:true});
        }
        if(node.nodes != null && node.nodes.length>0 ){
            for(var i = 0; i < node.nodes.length; i++){
                checkSubNode(node.nodes[i]);
            }
        }
    }

    //级联取消选中权限子节点
    function uncheckSubNode(node) {
        if(node.state.checked){
            $('#MenuTree').treeview('uncheckNode',[node.nodeId,{silent:true}]);
        }
        if(node.nodes != null && node.nodes.length > 0){
            for(var i = 0; i < node.nodes.length; i++){
                uncheckSubNode(node.nodes[i]);
            }
        }
    }

    //级联选中权限父级节点
    function checkPartenNode(node) {
        var parentNode = $('#MenuTree').treeview('getParent', node);
        if(parentNode.nodes){
            if(!parentNode.state.checked){
                $('#MenuTree').treeview('checkNode', [parentNode, { silent: true}]);
            }
            checkPartenNode(parentNode);
        }else{
            return;
        }
    }

    //级联取消选中父级节点
    function unCheckParten(node) {
        var brotherNodes = $('#MenuTree').treeview('getSiblings', node);
        if(brotherNodes.length == 0){
            //只有一个节点，直接取消选中父节点
            var parentNode = $('#MenuTree').treeview('getParent', node);
            if(parentNode.nodes){
                $('#MenuTree').treeview('uncheckNode', [parentNode, { silent: true}]);
            }
        }else {
            //多个兄弟节点，所有节点都取消选中才取消选中父节点
            var flag = true;
            for(var i = 0; i < brotherNodes.length; i++){
                if(brotherNodes[i].state.checked){
                    flag = false;
                    break;
                }
            }
            if(flag){
                var parentNode = $('#MenuTree').treeview('getParent', node);
                if(parentNode.nodes){
                    $('#MenuTree').treeview('uncheckNode', [parentNode, { silent: true}]);
                }
            }
        }
    }
	
	//重置参数
	function resetParams(){
		$("input[name=reportTitle]").val('');
		var isIssued = $("#isIssued").val();
		if(isIssued == '1'){
			$("#fillDepartmentId").val('');
		}
		$("input[name=status]").val('');
		var radios = document.getElementsByName("statusRadio");
		for(var i=0 ; i<radios.length; i++){
			if (radios[i].checked==true){
				radios[i].checked=false;
			}
		}
	}
	
	//经营快报下发
	function toIssuedReport(){
		$('#issuedModal').modal('toggle');
	}
	
	//复制上月经营指标
	function copyLastMonthIndicator(){
		var r = Math.random().toString().substring(5);
		$.ajax({
            url: CTX + 'issued-indicator/copy-last-month?Mathnum=' + r,
            method: 'GET',
            dataType: 'json',
            data: {},
            success: function (json) {
            	if(json.indicatorIds){
	            	$("input[name=indicatorIds]").val(json.indicatorIds);
	    			$('#dateModal').modal('toggle');
            	}else{
            		alert('上月无经营指标');
            	}
            },
            error: function () {
                loaded();
                alert('请求超时或系统出错');
            }
        });
	}
	
	/* 快报月份框消失事件  */
	$("#dateModal").on("hidden.bs.modal",function(){
		//审核框滚动
		$('#issuedModal').css({'overflow-y':'scroll'});
		
	});
	
	//打开选择月份modal
	function toSelectMonth(){
		var nodes = $('#MenuTree').treeview('getChecked');
		if(nodes && nodes.length > 0){
			var indicatorIds = "";
			for(var i = 0,len = nodes.length; i < len; i++){
				indicatorIds += nodes[i].id + ",";
			}
			$("input[name=indicatorIds]").val(indicatorIds);
			//console.log($("input[name=indicatorIds]").val());
			$('#dateModal').modal('toggle');
		}else{
			alert("请选择指标项！");
		}
	}
	
	//生成经营快报
	function createReport(){
		var reportMonth = $("input[name=reportMonth]").val();
		if(reportMonth == null || reportMonth == ''){
			alert("请选择填报月份");
		}else{
			var url = CTX+'business-report/issued?'+$('#businessReportForm').serialize();
			window.parent.openCommonFrameWin(url,1000,$(window).height()-55,function(result){
				if(result){
					cancelCreate();
					queryInfo();
				}
			});
		}
	}
	
	//取消生成经营快报
	function cancelCreate(){
		$("input[name=indicatorIds]").val('');
		$("input[name=reportMonth]").val('');
		$("#dateModal").modal("hide");
		$("#issuedModal").modal("hide");
	}
	
	//打开填报页面
	function fnFillReport(id,status){
		var r = Math.random().toString().substring(5);
		var url = CTX+'business-report/edit?id=' + id +"&autoClose=1&Mathnum="+r;
		var isIssued = $("#isIssued").val();
		var name = "经营快报填报";
		if(isIssued == '1' || status != '0'){//企管部管理员查看，或已提交
			url += "&readonly=readonly";
			name = "经营快报查看";
		}
		myShowModalDialogBR(url,name,window.screen.width,window.screen.height,function(v){
 			if(v==1){
 				queryInfo();
 			}
 		});
		
	}
	
	//刷新
	function refresh(){
		loading('正在刷新...');
		setTimeout(function(){
			resetParams();
		    queryInfo();
		    initMenuTree();
		    loaded();
    	},500);
	}
	

	/*]]>*/
</script>	
</html>
