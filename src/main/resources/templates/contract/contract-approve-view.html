<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--
* @Copyright(c): 厦门路桥信息股份有限公司  版权所有
* @author :XMRBI
* @Description:合同审批界面
* @createDate:2018-8-24
-->
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport" />
<title>合同审批界面</title>
<link rel="stylesheet"
	th:href="@{/static/bootstrap/css/bootstrap.min.css}" />
<link rel="stylesheet"
	th:href="@{/static/dist/css/font-awesome.min.css}" />
<link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}" />
<link rel="stylesheet" th:href="@{/static/css/common.css}" />
<link rel="stylesheet" th:href="@{/static/plugins/select2/select2.css}" />
<link rel="stylesheet"
	th:href="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.css}" />
<link rel="stylesheet"
	th:href="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.css}" />
<link rel="stylesheet"
	th:href="@{/static/plugins/bootstrap-validator/css/bootstrapValidator.min.css}" />
<link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.css}" />
<link rel="stylesheet"
	th:href="@{/static/dist/css/skins/_all-skins.min.css}" />
<link rel="stylesheet"
	th:href="@{/static/dist/css/font-awesome.min.css}" />
<link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}" />
<link rel="stylesheet"
	th:href="@{/static/plugins/jvectormap/jquery-jvectormap-1.2.2.css}" />
<!-- Theme style -->
<link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.min.css}" />
<link rel="stylesheet"
	th:href="@{/static/dist/css/skins/_all-skins.min.css}" />
<link rel="stylesheet" th:href="@{/static/css/common.css}" />
<!-- Bootstrap 3.3.7 -->
<link rel="stylesheet"
	th:href="@{/static/bootstrap/css/bootstrap.min.css}" />
<link rel="stylesheet"
	th:href="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.css}" />
<link rel="stylesheet" th:href="@{/static/plugins/datepicker/datepicker3.css}"/>
<style type="text/css">
.panel {
	margin-bottom: 0px;
}

.form-group {
	margin-bottom: 2px;
}
</style>
<style type="text/css">
html, body {
	overflow-x: hidden;
}

body {
	padding-top: 5px;
}

.box.box-solid.box-default>.box-header {
	background-color: #DEF2FF;
}

.col-sm-10 span {
	word-break: break-all;
	word-wrap: break-word;
	white-space: normal;
	display: block;
	float: left;
	height: 34px;
	padding: 6px 12px 6px 0px;
	font-size: 14px;
	line-height: 1.42857143;
	color: #777;
}

#compList>thead>tr>th {
	text-align: center;
	vertical-align: middle !important;
}

#compList>tbody>tr>td {
	vertical-align: middle !important;
}

#annexList>thead>tr>th {
	text-align: center;
	vertical-align: middle !important;
	vertical-align: middle !important;
}

#annexList>tbody>tr>td {
	text-align: center;
	vertical-align: middle !important;
	vertical-align: middle !important;
}

#btn_upload, #btn_delete {
	padding: 3px 6px;
	font-size: 12px;
}

input {
	text-align: center;
}

.table>tbody>tr>td {
	padding: 3px;
}
</style>
</head>
<body>
     <!-- 跳转表单-->
    <form action="" id="approveForm"  method="post"></form>
	<div class="container-fluid" style="width: 100%; height: 100%">
		<div class="row">
			<div class="col-md-12">
				<ul id="myTab" class="nav nav-tabs">
					<li class="active"><a href="#noFinshTask" data-toggle="tab">待办事项</a>
					</li>
					
					<li ><a href="#contractMain" data-toggle="tab"><span></span>已办事项</a>
					</li>
					
				</ul>
			</div>
		</div>

		<div id="myTabContent" class="tab-content">
		
		<div  class="tab-pane fade in active" id="noFinshTask" style="width: 100%; height: 100%">
		<div class="container-fluid" style="width: 100%; height: 100%">
		<!-- <div class="col-sm-12"> -->
		<div class="box box-default collapsed-box box-solid"
			style="margin-bottom: 5px; border-color: #DEF2FF;">
			<div class="box-header with-border">
				<form id="formSearch" class="form-horizontal">

					<div id="search_div" class="col-md-12">
						<div class="col-md-3" style="padding-right: 0px;">
							<div class="form-group">
								<label class="col-sm-3 control-label search_div"
									style="width: 100px;">合同名称:</label>
								<div class="col-sm-9 search_div" style="width: 120px;">
									<input type="text" class="form-control" id="taskContractName"
										name="taskContractName" value="" onkeyup="this.value=this.value.replace(/\s+/g,'')" />
								</div>
							</div>
						</div>

						<div class="col-md-3" style="padding: 0px;">
							<div class="form-group">
								<label class="col-sm-1 control-label search_div"
									style="width: 100px;">发送人:</label>
								<div class="col-sm-9 search_div" style="width: 140px;">
									<input type="text" class="form-control" id="taskSendPeople"
										name="taskSendPeople" value=""  onkeyup="this.value=this.value.replace(/\s+/g,'')"/>
								</div>
							</div>
						</div>
						
						
						   <div class="col-md-6" style="padding: 0px;">
	            			<div class="form-group">
			                  	<label class="col-sm-3 control-label search_div" style="width: 100px;">接收时间:</label>
			                  	<div class="col-sm-4 search_div">
			                  	<div class="input-group date">
		                    	 	<input type="text" class="form-control datepicker" id="startDay" name="startDay"/>
		                    	 	<div class="input-group-addon">
				                    	<i class="fa fa-calendar"></i>
				                  	</div>
				                  	</div>
			                  	</div>
			                  	<label class="col-sm-1 control-label" style="width: 10px;align-content: center;">~</label>
			                  	<div class="col-sm-4 search_div">
			                  		<div class="input-group date">
			                    	 	<input type="text" class="form-control datepicker" id="endDay" name="endDay"/>
			                    	 	<div class="input-group-addon">
					                    	<i class="fa fa-calendar"></i>
					                  	</div>
					                </div>
			                  	</div>
			                </div>
	            		</div>
					</div>
					<br/>
					<br/>

					<div id="search_div" class="col-md-12">

						   	<div class="col-md-3" style="padding: 0px;">
							<div class="form-group">
								<label class="col-sm-1 control-label search_div"
									style="width: 115px;">经办人:</label>
								<div class="col-sm-9 search_div" style="width: 120px;">
									<input type="text" class="form-control" id="taskCreatPeople"
										name="taskCreatPeople" value=""  onkeyup="this.value=this.value.replace(/\s+/g,'')"/>
								</div>
							</div>
						</div>
						
						<div class="col-md-8" style="padding: 0px;">
							&nbsp;&nbsp;&nbsp;&nbsp;
							<button id="btn_add" type="button" class="btn btn-default"
								onclick="queryInfo();">
								<span class="glyphicon glyphicon-search" aria-hidden="true"
									style="color: #18A689"></span>查询
							</button>
							&nbsp;&nbsp;&nbsp;&nbsp;
							<button id="btn_edit" type="button" class="btn btn-default"
								onclick="resetParams();">
								<span class="glyphicon glyphicon-repeat" aria-hidden="true"
									style="color: #EC4758"></span>重置
							</button>
						</div>
					</div>

				</form>
			</div>
		</div>
		 <table id="dataList"></table>
	    </div>
		</div>
		
		
		<div  id="contractMain" class="tab-pane fade">
		 <!--设置表单保存合同数据 -->
		<div class="container-fluid" style="width: 100%; height: 100%">
		<!-- <div class="col-sm-12"> -->
		<div class="box box-default collapsed-box box-solid"
			style="margin-bottom: 5px; border-color: #DEF2FF;">
			<div class="box-header with-border">
				<form id="formFinshSearch" class="form-horizontal">
					<div id="search_div" class="col-md-12">
						<div class="col-md-4" style="padding-right: 0px;">
							<div class="form-group">
								<label class="col-sm-5 control-label search_div"
									style="width: 118px;">合同名称:</label>
								<div class="col-sm-7 search_div" style="width: 140px;">
									<input type="text" class="form-control" id="finshContractName"
										name="finshContractName" value="" onkeyup="this.value=this.value.replace(/\s+/g,'')"/>
								</div>
							</div>
						</div>

						<div class="col-md-4" style="padding: 0px;">
							<div class="form-group">
								<label class="col-sm-1 control-label search_div"
									style="width: 100px;">合同类型:</label>
								<div class="col-sm-9 search_div" style="width: 200px;">
									<!-- <input type="text" class="form-control" id="taskContractType"
										name="taskContractType" value=""  onkeyup="this.value=this.value.replace(/\s+/g,'')"/> -->
									<select id="taskContractType" name="taskContractType"
									class="form-control" style="width: 180px;">
									<option value=""></option>
									<option value="0">钢材赊销、围挡、钢支撑、机电</option>
									<option value="1">甲供三方合同单</option>
									<option value="2">地铁甲供物资采购合同单</option>
									<option value="3">办公室专用合同单</option>
									<option value="4">财务部、贸管部通用合同单</option>
								</select>
								</div>
							</div>
						</div>
						
						
						
						 <div class="col-md-4" style="padding: 0px;">
	            				<div class="form-group">
								<label class="col-sm-1 control-label search_div"
									style="width: 100px;">拟稿人:</label>
								<div class="col-sm-9 search_div" style="width: 140px;">
									<input type="text" class="form-control" id="creatPeople"
										name="creatPeople" value=""  onkeyup="this.value=this.value.replace(/\s+/g,'')"/>
								</div>
							</div>
	            		</div>
					</div>
					<br/>
					<br/>

					<div id="search_div" class="col-md-12">

						   	<div class="col-md-4" style="padding: 0px;">
							<div class="form-group">
			                  	<label class="col-sm-7 control-label search_div" style="width: 130px;">发起时间:</label>
			                  	<div class="col-sm-5 search_div" style="width: 165px;">
			                  	<div class="input-group date">
		                    	 	<input type="text" class="form-control datepicker" id="creatDay" name="creatDay"/>
		                    	 	<div class="input-group-addon">
				                    	<i class="fa fa-calendar"></i>
				                  	</div>
				                  	</div>
			                  	</div>
			                </div>
						</div>
						
							<div class="col-md-3" style="padding: 0px;">
							<div class="form-group">
			                  	<label class="col-sm-5 control-label search_div" style="width: 100px;">合同状态:</label>
			                   <div class="col-sm-7 search_div" style="width: 140px;">
									<select id="findContractStatus" name="findContractStatus"
									class="form-control" style="width: 180px;">
									<option value=""></option>
									<option value="流程进行中">流程进行中</option>
									<option value="流程已结束">流程已结束</option>
								</select>
								</div>
			                </div>
						</div>
						
						<div class="col-md-5" style="padding: 0px;">
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<button id="btn_add" type="button" class="btn btn-default"
								onclick="queryFinshInfo();">
								<span class="glyphicon glyphicon-search" aria-hidden="true"
									style="color: #18A689"></span>查询
							</button>
							&nbsp;&nbsp;&nbsp;&nbsp;
							<button id="btn_edit" type="button" class="btn btn-default"
								onclick="resetParams();">
								<span class="glyphicon glyphicon-repeat" aria-hidden="true"
									style="color: #EC4758"></span>重置
							</button>
						</div>
					</div>

				</form>
			</div>
		</div>
	   </div>
         <table id="finshList"></table> 
			</div>
			
		</div>
	</div>
		
</body>
<!-- jQuery 2.2.3 -->
<script th:src="@{/static/plugins/jQuery/jquery-2.2.3.min.js}"></script>
<!-- Bootstrap 3.3.7 -->
<script th:src="@{/static/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/static/js/common.js}"></script>
<script
	th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></script>
<script
	th:src="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.js}"></script>
<script
	th:src="@{/static/plugins/bootstrap-table/dist/locale/bootstrap-table-zh-CN.min.js}"></script>
<script th:src="@{/static/plugins/jQuery/jquery.serializejson.min.js}"></script>
<script th:src="@{/static/plugins/datepicker/bootstrap-datepicker.js}"></script>
<script
	th:src="@{/static/plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js}"></script>
<script type="text/javascript"
	th:src="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.js}"></script>
<script
	th:src="@{/static/plugins/bootstrap-table/dist/extensions/export/bootstrap-table-export.min.js}"></script>
<script type="text/javascript"
	th:src="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.js}"></script>
<script type="text/javascript"
	th:src="@{/static/plugins/bootstrap-contextmenu/bootstrap-contextmenu.js}"></script>
<script type="text/javascript"
	th:src="@{/static/plugins/bootstrap-contextmenu/prettify.js}"></script>
<script type="text/javascript"
	th:src="@{/static/plugins/attention/zDialog/zDrag.js}"></script>
<!-- Slimscroll -->
<script type="text/javascript"
	th:src="@{/static/plugins/slimScroll/jquery.slimscroll.min.js}"></script>
<script type="text/javascript" th:src="@{/static/dist/js/app.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/common.js}"></script>
<script th:inline="javascript" type="text/javascript">
/*<![CDATA[*/
	var CTX = [[@{/}]];
		$(function () {
			  //未完成Table
		    var oTable = new TableInit();
		    oTable.Init();
		    //完成表格
		    var oFinshTableInit=new FinshTableInit();
		    oFinshTableInit.Init();
		    
		    //2.初始化Button的点击事件
		    var oButtonInit = new ButtonInit();
		    oButtonInit.Init();
		    //初始化时间控件
		    $('.datepicker').datepicker({
		    	format:'yyyy-mm-dd',
		    	language:'zh-CN',
		      	autoclose: true,
		      	startView: 'months', //开始视图层，为月视图层
		        maxViewMode:'years', //最大视图层，为年视图层
		        minViewMode:'days', //最小视图层，为月视图层
		        clearBtn: true
		    }).on('hide',function(){
			});
		});

		
		//初始化按钮
		var ButtonInit = function () {
		    var oInit = new Object();
		    var postdata = {};
		    oInit.Init = function () {
		        //初始化页面上面的按钮事件
		    };
		    return oInit;
		};
	
	//格式化日期
	function formatDate(time){
	    var date = new Date(time);
	    var year = date.getFullYear(),
	        month = date.getMonth()+1,//月份是从0开始的
	        day = date.getDate(),
	        hour = date.getHours(),
	        min = date.getMinutes(),
	        sec = date.getSeconds();
	    var preArr = Array.apply(null,Array(10)).map(function(elem, index) {
	        return '0'+index;
	    });////开个长度为10的数组 格式为 00 01 02 03

	    var newTime = year + '-' +
	                (preArr[month]||month) + '-' +
	                (preArr[day]||day);/*  + ' ' +
	                (preArr[hour]||hour) + ':' +
	                (preArr[min]||min) + ':' +
	                (preArr[sec]||sec); */
	    return newTime;         
	  }
	
	//未完成列表
	var TableInit = function () {
	    var oTableInit = new Object();
	    //初始化Table
	    oTableInit.Init = function () {
	        $('#dataList').bootstrapTable({
	        	url: CTX + 'contract-approve/contract-approve-loadToad', //请求后台的URL（*）
	            method: 'get',                      //请求方式（*）
	            striped: true,                      //是否显示行间隔色
	            cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
	            pagination: true,                   //是否显示分页（*）
	            sortable: false,                     //是否启用排序
	            sortOrder: "asc",                   //排序方式
	            queryParams: oTableInit.queryParams,//传递参数（*）
	            sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
	            pageNumber:1,                       //初始化加载第一页，默认第一页
	            pageSize: 10,                       //每页的记录行数（*）
	            pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
	            queryParamsType: "a",
	            strictSearch: true,
	            minimumCountColumns: 2,             //最少允许的列数
	            height:$(window).height()-85,	    //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
	            uniqueId: "id",                     //每一行的唯一标识，一般为主键列
	            undefinedText: "",
	            columns: [
					{
					    field: 'number',
					    title:'序号',
					    align : 'center',
					    sortable:true,
					    formatter:function(value,row,index){
					    	var pageSize=$('#dataList').bootstrapTable('getOptions').pageSize;
			                var pageNumber=$('#dataList').bootstrapTable('getOptions').pageNumber;
			                return pageSize * (pageNumber - 1) + index + 1;
					    }
					},{
					    field: 'contractName',
					    title:'合同名称',
					    align : 'center',
					    sortable:true,
					    
					},{
					    field: 'sendTime',
					    title:'接收时间',
					    align : 'center',
					    sortable:true
					},{
					    field: 'sendPeople',
					    title:'发送人',
					    align : 'center',
					    sortable:true
					},{
					    field: 'contractCreatPeople',
					    title: '拟稿人',
					    align : 'center',
					    sortable:true
					},{
					    field: 'operation',
					    title:'审批',
					    align : 'center',
					    sortable:true,
					    formatter:function(v,r,i){
							return '<a href="javascript:approveContract(\'' + r.id + '\',\'' + r.taskId + '\',\'' + r.taskName + '\')"><span class="glyphicon glyphicon-search" aria-hidden="true" style="color: blue ;"></span></a>';
		   				}
					},{
					    field: 'flow',
					    title:'流程图',
					    align : 'center',
					    sortable:true,
					    formatter:function(v,r,i){
							return '<a href="javascript:lookFlow(\'' + r.taskId + '\')"><span class="glyphicon glyphicon-search" aria-hidden="true" style="color: blue ;"></span></a>';
		   				}
					},]
	        });
	      
	    };
	    
	    //得到查询的参数
	    oTableInit.queryParams = function (params) {
	        var temp = {   //这里的键的名字和控制器的变量名必须一致，这边改动，控制器也需要改成一样的
	        	pageNum: params.pageNumber,//页码params.offset
                size: params.pageSize,//页面大小params.limit
                startDay: $("#startDay").val(),
                endDay: $("#endDay").val(),
                taskSendPeople: $("#taskSendPeople").val(),
                taskCreatPeople: $("input[name='taskCreatPeople']").val(),
                taskContractName: $("#taskContractName").val(),
	        };
	        return temp;
	    };
	    return oTableInit;
	};
	
	//查询-刷新
	var queryInfo = function(){
		var data = JSON.stringify($('#formSearch').serializeJSON());
		var queryData = {from: data};
		$('#dataList').bootstrapTable('refreshOptions',{pageNumber:1,pageSize:10,query:queryData});
	}
	
	
	//-------------已办列表------------------
	var FinshTableInit = function () {
	    var oFinshTableInit = new Object();
	    //初始化Table
	    oFinshTableInit.Init = function () {
	        $('#finshList').bootstrapTable({
	        	url: CTX + 'contract-approve/contract-approve-loadHistory', //请求后台的URL（*）
	            method: 'get',                      //请求方式（*）
	            striped: true,                      //是否显示行间隔色
	            cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
	            pagination: true,                   //是否显示分页（*）
	            sortable: false,                     //是否启用排序
	            sortOrder: "asc",                   //排序方式
	            queryParams: oFinshTableInit.queryParams,//传递参数（*）
	            sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
	            pageNumber:1,                       //初始化加载第一页，默认第一页
	            pageSize: 10,                       //每页的记录行数（*）
	            pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
	            queryParamsType: "a",
	            strictSearch: true,
	            minimumCountColumns: 2,             //最少允许的列数
	            height:$(window).height()-85,	    //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
	            uniqueId: "id",                     //每一行的唯一标识，一般为主键列
	            undefinedText: "",
	            columns: [
					{
					    field: 'number',
					    title:'序号',
					    align : 'center',
					    sortable:true,
					    formatter:function(value,row,index){
					    	var pageSize=$('#finshList').bootstrapTable('getOptions').pageSize;
			                var pageNumber=$('#finshList').bootstrapTable('getOptions').pageNumber;
			                return pageSize * (pageNumber - 1) + index + 1;
					    }
					},{
					    field: 'contractType',
					    title:'合同类型',
					    align : 'center',
					    sortable:true,
					    
					},{
					    field: 'contractName',
					    title:'合同名称',
					    align : 'center',
					    sortable:true
					},{
					    field: 'creatTime',
					    title:'发起时间',
					    align : 'center',
					    sortable:true
					},{
					    field: 'contractCreatPeople',
					    title:'拟稿人',
					    align : 'center',
					    sortable:true
					},{
					    field: 'contractStatus',
					    title:'合同状态',
					    align : 'center',
					    sortable:true
					},{
					    field: 'flow',
					    title:'流程图',
					    align : 'center',
					    sortable:true,
					    formatter:function(v,r,i){
							return '<a href="javascript:lookFlow(\'' + r.taskId + '\')"><span class="glyphicon glyphicon-search" aria-hidden="true" style="color: blue ;"></span></a>';
		   				}
					},]
	        });
	      
	    };
	    //得到查询的参数
	    oFinshTableInit.queryParams = function (params) {
	        var temp = {   //这里的键的名字和控制器的变量名必须一致，这边改动，控制器也需要改成一样的
	        	pageNum: params.pageNumber,//页码params.offset
                size: params.pageSize,//页面大小params.limit
                creatDay: $("#creatDay").val(),
                finshContractName: $("input[name='finshContractName']").val(),
                creatPeople: $("input[name='creatPeople']").val(),
                taskContractType: $("#taskContractType").val(),
                findContractStatus: $("#findContractStatus").val(),
	        };
	        return temp;
	    };
	    return oFinshTableInit;
	};
	
	//查询-刷新
	var queryFinshInfo = function(){
		var data = JSON.stringify($('#formFinshSearch').serializeJSON());
		var queryData = {from: data};
		$('#finshList').bootstrapTable('refreshOptions',{pageNumber:1,pageSize:10,query:queryData});
	}
	
	//重置参数
	function resetParams(){
		//待办列表
		$("input[name=taskSendPeople]").val('');
		$("input[name=startDay]").val('');
		$("input[name=endDay]").val('');
		$("input[name=taskContractName]").val('');
		$("input[name=taskCreatPeople]").val('');
		//已办列表
		$("input[name=creatDay]").val('');
		$("input[name=finshContractName]").val('');
		$("input[name=creatPeople]").val('');
		$("#creatDay").val("");
		$("#findContractStatus option:first").prop("selected", 'selected');
		$("#taskContractType option:first").prop("selected", 'selected');
	}
	//初始化按钮
	var ButtonInit = function () {
	    var oInit = new Object();
	    var postdata = {};

	    oInit.Init = function () {
	        //初始化页面上面的按钮事件
	    };
	    return oInit;
	};
 	//--------------------------------
 	//------------审批------------------
 	
 	//领导审核界面的下发
 	function approveContract(id,taskId,taskName){
 		 
 		if(taskName.search("上传扫描件")!=-1){
 			$("#approveForm").attr("action",CTX+'contract-approve/upload-scan-contract-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName=="扫描件复核"){
 			$("#approveForm").attr("action",CTX+'contract-approve/upload-scan-contract-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName=="经办人修改"){
 			$("#approveForm").attr("action",CTX+'contract-approve/send-revice-approve-contract?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName=="合同文本核稿"){
 			$("#approveForm").attr("action",CTX+'contract-approve/send-revice-approve-contract?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName=="合同复核及编号"){
 			$("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=合同复核及编号")
 		}else{
  			$("#approveForm").attr("action",CTX+'contract-approve/leader-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}
 		
 		//办公室专用流程
 		if(taskName=="办公室-办公室主任审核"){
 			$("#approveForm").attr("action",CTX+'contract-approve/upload-scan-contract-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName=="办公室流程会审"){
 			$("#approveForm").attr("action",CTX+'contract-approve/upload-scan-contract-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		} else if(taskName.search("办公室-财务")!=-1||taskName.search("办公室-贸易")!=-1||taskName.search("办公室-风控总监审核")!=-1){
 			$("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName.search("办公室-分管领导审核")!=-1){
 			$("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName.search("办公室-公司负责人审核")!=-1){
 			$("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName.search("办公室-集团领导审核")!=-1){
 			$("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName.search("统稿")!=-1){
             $("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=经办人统稿")
 		}else if(taskName=="办公室-合同复核及编号"){
            $("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=合同复核")
 		}else if(taskName=="办公室-申请人修改"){
            $("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=经办人统稿")
 		}
 		
 		//贸易-财务合同专用流程
 		if(taskName=="财务部、贸管部-部门负责人审核"){
 			$("#approveForm").attr("action",CTX+'financial-trade-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=部门负责人审核")
 		}else if(taskName=="财务部、贸管部-风控总监审核"||taskName=="财务部、贸管部-会计审核"||taskName=="财务部、贸管部-财务部部门负责人审核"){
 			$("#approveForm").attr("action",CTX+'financial-trade-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName=="财务部、贸管部-公司负责人审核"||taskName=="财务部、贸管部-集团领导审核"){
 			$("#approveForm").attr("action",CTX+'financial-trade-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}else if(taskName=="财务部、贸管部-合同文本统稿"){
            $("#approveForm").attr("action",CTX+'financial-trade-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=经办人统稿")
 		}else if(taskName=="财务部、贸管部-合同复核及编号"){
            $("#approveForm").attr("action",CTX+'financial-trade-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=合同复核")
 		}else if(taskName=="财务部、贸管部-申请人修改"){
            $("#approveForm").attr("action",CTX+'office-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName+"&sendType=经办人统稿")
 		}else if(taskName=="财务部、贸管部-法务审核"||taskName=="财务部、贸管部-贸易管理部负责人审核"||taskName=="财务部、贸管部-财务总监审核"||taskName=="财务部、贸管部-分管领导审核"){
 			$("#approveForm").attr("action",CTX+'financial-trade-contract/contract-branch-approve-view?id='+id+"&taskId="+taskId+"&taskName="+taskName)
 		}

 		$("#approveForm").submit();
 	}
 	//查看流程图
 	function lookFlow(taskId){
		window.open(CTX+'uflo/diagram?taskId='+taskId);
 	}
 	
 	
		/*]]>*/
	</script>

	</html>

