 <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
    <title>合同管理</title>
    <link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/jvectormap/jquery-jvectormap-1.2.2.css}"/>
    <!-- tabs -->
    <link rel="stylesheet" th:href="@{/static/dist/css/bootstrap-addtabs.css}"/>
    <!-- Theme style -->
    <link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/skins/_all-skins.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/common.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.css}"/>
    <style type="text/css">
        html, body {
            min-height: 100%;
        }

        .nav-tabs-custom > .nav-tabs > li.active > a, .nav-tabs-custom > .nav-tabs > li.active:hover > a {
            background-color: #ecf0f5;
        }

        .nav-tabs-custom > .tab-content {
            padding: 0;
        }

        .nav-tabs-custom > .nav-tabs > li.active > a, .nav-tabs-custom > .nav-tabs > li.active:hover > a {
            padding-bottom: 8px;
        }

        .nav-tabs-custom > .nav-tabs {
            /* box-shadow: 0px 1px 10px 0px #949494; */
            background-color: #fdfdfd;
        }

        .close-tab {
            right: 2px;
            top: 0;
        }

        .nav-tabs-custom > .nav-tabs > li {
            border-top: 0;
            margin-bottom: -2px;
            margin-right: 5px;
        }

        .sidebar-toggle {
            position: absolute;
            top: 0;
            left: 0;
            height: 41px;
            width: 20px;
            background-color: #fdfdfd;
            line-height: 41px;
            border-bottom: 1px solid #f4f4f4;
        }

        .main-nodata {
            display: -webkit-flex;
            display: flex;
            -webkit-justify-content: center;
            justify-content: center;
            align-items: center;
            -webkit-align-items: center;
            position: absolute;
            text-align: center;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .main-nodata h5 {
            position: absolute;
            top: 229px;
            left: 0;
            right: 0;
            text-align: center;
            color: #777;
            font-size: 18px;
        }
    </style>
</head>
<body class="hold-transition skin-blue" style="overflow: hidden;">
<div class="wrapper">
    <aside class="main-sidebar" style="padding-top:0;">
        <section class="sidebar">
            <ul id="menuTree" class="sidebar-menu"></ul>
        </section>
    </aside>
    <div class="content-wrapper" style="position: relative;background: #fff;">
        <div class="main-nodata">
            <div style="position: relative;">
                <img th:src="@{/static/images/main-nodata.png}"/>
                <h5>欢迎进入合同管理系统</h5>
            </div>
        </div>
        <!-- tabs start-->
        <div id="tabs" class="nav-tabs-custom" style="height:100%;">
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                <span class="fa fa-fw fa-navicon"></span>
            </a>
            <ul class="nav nav-tabs" role="tablist" style="margin-left:20px;height:41px;">
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
            </div>
        </div>
        <!-- tabs end-->
    </div>
</div>
<!-- frame窗口信息 -->
	<div class="modal fade modal-primary" id="common_frame_win" role="dialog" data-backdrop="false" aria-hidden="true">
		<div class="modal-dialog" style="width:1024px;">
	      	<div class="modal-content" style="background-color:rgba(255, 255, 255, 0);">
		        <div class="modal-header" style="padding:5px;">
		          	<button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top:0;">
		            	<span aria-hidden="true">&times;</span>
		            </button>
		            <button type="button" class="close max-btn" style="margin-right:5px;margin-top: -1px;" onclick="fnMaxModalWin(this)">
		            	<i class="fa fa-square-o" style="font-size:16px;"></i>
		            </button>
		          	<h4 class="modal-title"></h4>
		        </div>
		        <div class="modal-body" style="height: 550px;padding:0px;background-color: rgba(3, 51, 101, 0.9) !important;">
		          	<iframe style="width: 100%;height:100%;border:0;"></iframe>
		        </div>
	      	</div>
		</div>
	</div>
</body>
<script type="text/javascript" th:src="@{/static/plugins/jQuery/jquery-2.2.3.min.js}"></script>
<script type="text/javascript" th:src="@{/static/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/myTreeView.js}"></script>
<script type="text/javascript" th:src="@{/static/js/common.js}"></script>
<!-- tabs -->
<script type="text/javascript" th:src="@{/static/dist/js/bootstrap-addtabs.js}"></script>
<script type="text/javascript" th:src="@{/static/dist/js/app.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></script>
<script type="text/javascript" th:inline="javascript">
    var CTX = [[@{/}]];
</script>
<script type="text/javascript" th:inline="javascript">
    /*<![CDATA[*/

    $(function () {
        //tab初始化
        $('#tabs').addtabs({monitor: '.topbar'});
        //初始化菜单树
        initMenuTree();
        //iframe——窗口title
        $('#common_frame_win').find('iframe').on('load',function(){
			$('#common_frame_win .modal-title').html($(this).contents().attr("title"));
		});
    });

    function initMenuTree() {
        $.getJSON(CTX + 'admin-manage/query-menus', {parentAuthId: [[${parentAuthId}]]}, function (json) {
            var menuTree = new MyTreeview({
                id: 'menuTree',
                title: '功能菜单',
                data: json,
                nodeClick: function (node) {
                    var url = node.url;
                    if (url.substring(0, url.indexOf(':')) == 'frame') {
                        var timetamp = (new Date()).getTime();
                        Addtabs.add({
                            id: node.id,
                            icon: node.icon,
                            title: node.name,
                            close: true,
                            url: CTX + url.substring(url.indexOf(':') + 1)
                        });
                    }
                    if (url.substring(0, url.indexOf(':')) == 'window') {
                        $('#common_frame_win').modal('toggle');
                        $('#common_frame_win iframe').attr('src', CTX + url.substring(url.indexOf(':') + 1));
                    }
                }
            });
        });
    }
    
    var COMMON_CALLBACK = null;
	function openCommonFrameWin(url,width,height,callback){
		if(width!=null){
			oldWinW = width;
		}
		if(height!=null){
			oldWinH = height;
		}
		$('#common_frame_win .modal-dialog').width(oldWinW);
		$('#common_frame_win .modal-body').height(oldWinH);
		$('#common_frame_win').modal('toggle');
		window.setTimeout(function(){
			$('#common_frame_win iframe').attr('src',url);	
		},300);
		COMMON_CALLBACK = callback;
	}
	
	function openMaxCommonFrameWin(url,callback){
		$('#common_frame_win').modal('toggle');
		//执行最大化窗口
		var _this = $('#common_frame_win .max-btn');
		_this.parent().parent().parent().parent().css({'overflow-y':'hidden'});
		_this.parent().parent().parent().css({width:$(window).width()+'px',margin:'0px auto'});
		_this.parent().next().css({height:($(window).height()-$(_this).parent().outerHeight())+'px'});
		_this.find('i').removeClass('fa-square-o');
		_this.find('i').addClass('fa-clone');
		window.setTimeout(function(){
			$('#common_frame_win iframe').attr('src',url);	
		},300);
		COMMON_CALLBACK = callback;
	}
	
	//供子页面调用的关闭通用窗口函数
	function closeCommonFrameWin(returnData){
		$('#common_frame_win').modal('toggle');
		//如果有回调则调用回调
		if(COMMON_CALLBACK){
			COMMON_CALLBACK(returnData);
		}
		COMMON_CALLBACK = null;
	}
	
	/**
	 * 最大最小化modal窗口
	 * @param _this
	 * @returns
	 */
	var oldWinW = window.screen.availWidth-100,oldWinH = window.screen.availHeight-100;
	function fnMaxModalWin(_this){
		if($(_this).find('i').hasClass('fa-square-o')){
			//执行最大化窗口
			$(_this).parent().parent().parent().parent().css({'overflow-y':'hidden'});
			$(_this).parent().parent().parent().css({width:$(window).width()+'px',margin:'0px auto'});
			$(_this).parent().next().css({height:($(window).height()-$(_this).parent().outerHeight())+'px'});
			$(_this).find('i').removeClass('fa-square-o');
			$(_this).find('i').addClass('fa-clone');
		}else{
			//还原窗口大小
			$(_this).parent().parent().parent().parent().css({'overflow-y':'auto'});
			$(_this).parent().parent().parent().css({width:oldWinW+'px',margin:'30px auto'});
			$(_this).parent().next().css({height:oldWinH+'px'});
			$(_this).find('i').removeClass('fa-clone');
			$(_this).find('i').addClass('fa-square-o');
		}
	}

    /*]]>*/
</script>
</html>