<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
    <title>组织机构</title>
    <link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/common.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/select2/select2.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-validator/css/bootstrapValidator.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/skins/_all-skins.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/font-awesome.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/ionicons.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/jvectormap/jquery-jvectormap-1.2.2.css}"/>
    <!-- datetime picker -->
    <link rel="stylesheet" th:href="@{/static/plugins/datetimepicker/css/bootstrap-datetimepicker.min.css}"/>
    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" th:href="@{/static/plugins/iCheck/all.css}"/>
    <!-- daterange picker -->
    <link rel="stylesheet" th:href="@{/static/plugins/daterangepicker/daterangepicker.css}"/>
    <!-- Theme style -->
    <link rel="stylesheet" th:href="@{/static/dist/css/AdminLTE.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/dist/css/skins/_all-skins.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/common.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.css}"/>
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" th:href="@{/static/bootstrap/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/datetimepicker/css/bootstrap-datetimepicker.css}"/>
    <link rel="stylesheet" th:href="@{/static/plugins/datetimepicker/css/bootstrap-datetimepicker.min.css}"/>
    <style type="text/css">
        html, body {
            overflow-x: hidden;
        }

        body {
            padding-top: 5px;
        }

        .up_icon img {
            max-height: 100%;
        }

        .up_icon span {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            line-height: 20px;
            background: #8e8e8e;
            text-align: center;
            color: #fff;
            font-size: 12px;
            border-radius: 0px 0px 6px 6px;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .col-sm-10 span {
            word-break: break-all;
            word-wrap: break-word;
            white-space: normal;
            display: block;
            float: left;
            height: 34px;
            padding: 6px 12px 6px 0px;
            font-size: 14px;
            line-height: 1.42857143;
            color: #777;
        }
    </style>
</head>
<body>
<div class="container-fluid" style="width:100%; height: 100%">
    <!-- 左侧菜单信息-->
    <div class="col-sm-3">
        <div class="row">
            <div class="nav-tabs-custom">
                <!-- Tabs within a box -->
                <ul class="nav nav-tabs">
                    <li class="active" onclick="changeView('org')"><a href="#revenue-chart" data-toggle="tab">组织架构</a></li>
                    <li onclick="changeView('role')"><a href="#sales-chart" data-toggle="tab">角色</a></li>
                </ul>
                <div class="tab-content no-padding">
                    <!-- Morris chart - Sales -->
                    <div class="tab-pane active" id="revenue-chart">
                        <div>
                            <div class="box-header with-border" style="background-color: #d2d6de;">
                                <h3 class="box-title"><i class="fa fa-user"></i>&nbsp;&nbsp;组织架构</h3>
                            </div>
                        </div>
                        <!-- 组织架构树-->
                        <div class="" id="org_tree_content" style="overflow: auto">
                            <div id="orgMenuTree" data-toggle="context" data-target="#org-context-menu"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 右侧组织架构、角色表格信息-->
    <div class="col-sm-9">
        <!-- 组织架构表格-->
        <div id="orgTable">
            <div class="box box-default collapsed-box box-solid" style="margin-bottom:5px;">
                <div class="box-header with-border">
                    <h3 class="box-title" id="orgName">组织架构</h3>
                    <form id="formSearch" type="hidden" class="form-horizontal">
                        <input type="hidden" id="orgId" name="useunit.id"/>
                    </form>
                </div>
            </div>
            <div id="toolbar" class="btn-group">
                <button id="btn_add_member" type="button" class="btn btn-default btn-primary" disabled="disabled"
                        onclick="goAddSysuer()">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增成员
                </button>
                <button id="btn_delete_member" type="button" class="btn btn-default btn-danger" disabled="disabled" onclick="disableSysuser()">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>批量禁用
                </button>
            </div>
            <table id="orgTableContent"></table>
        </div>
 
    </div>

    <!-- 组织架构右键菜单-->
    <div id="org-context-menu">
        <ul class="dropdown-menu" role="menu">
            <!-- 添加删除菜单-->
            <li><a tabindex="-1" id="addMenu"><em id="addMenu" class="glyphicon glyphicon-plus"></em>添加菜单</a></li>
            <li><a tabindex="-1" id="removeMenu"><em id="removeMenu" class="glyphicon glyphicon-remove"></em>删除菜单</a></li>
        </ul>
    </div>
</div>

<!-- 模态窗体-->

<!-- 添加、编辑公司 -->
<div class="modal fade" id="useunit_edit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 id="add_company_titile" class="modal-title">新建子公司</h4>
            </div>
            <div class="modal-body">
                <form id="useunitForm" role="form" method="post" class="form-horizontal">
                    <input type="hidden" name="id"/>
                    <input type="hidden" name="manageType" value="1"/>
                    <input type="hidden" name="parentId"/>
                    <input type="hidden" name="lesseeId"/>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="useunit_name">公司类型<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <select class="form-control" name="useunitType.id">
                                <option value="">请选择类型</option>
                                <option th:each="utype : ${useunitTypes}" th:value="${utype.id}"
                                        th:text="${utype.typeName}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="useunit_name">公司名称<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="useunit_name" name="name" type="text" class="form-control"
                                   placeholder="企业名称不能超过20个字"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="useunit_shortName">公司简称<font
                                color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="useunit_shortName" name="shortName" type="text" class="form-control"
                                   placeholder="企业简称不能超过20个字"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">备&nbsp;&nbsp;&nbsp;注&nbsp;</label>
                        <div class="col-sm-9">
                            <input name="remark" type="text" class="form-control" placeholder="企业备注"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSaveUseunit(this)">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 添加、编辑部门-->
<div class="modal fade" id="dept_edit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="dept_mode_title">新增部门</h4>
            </div>
            <div class="modal-body">
                <form id="deptForm" role="form" method="post" class="form-horizontal">
                    <input type="hidden" name="id"/>
                    <input type="hidden" name="manageType" value="1"/>
                    <input type="hidden" name="parentId"/>
                    <input type="hidden" name="lesseeId"/>
                    <div class="form-group">
                        <label class="col-sm-3 control-label" for="dept_name">部门名称<font color="red">*</font></label>
                        <div class="col-sm-9">
                            <input id="dept_name" name="name" type="text" class="form-control"
                                   placeholder="部门名称不能超过32个字"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="goSaveDept(this)">保存</button>
            </div>
        </div>
    </div>
</div>

<!--删除公司、部门提示框-->
<div class="modal fade" id="delete_useunit_modalwin" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="delete_useunit_title">删除部门</h4>
            </div>
            <div class="modal-body">
                <form role="form" class="form-horizontal">
                    <input type="hidden" id="delete_useunit_id"/>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <h4 id="delete_useunit_tip">确认删除部门？</h4>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <h5>没有子部门且没有成员的部门才可以被删除。</h5>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="deleteUseunit()">确定</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>




</body>
<script type="text/javascript" th:src="@{/static/plugins/jQuery/jquery-2.2.3.min.js}"></script>
<script type="text/javascript" th:src="@{/static/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/select2/select2.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-toggle/bootstrap-toggle.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/common.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-treeview/bootstrap-treeview.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-contextmenu/bootstrap-contextmenu.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-contextmenu/prettify.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/attention/zDialog/zDrag.js}"></script>
<!--<script type="text/javascript" th:src="@{/static/plugins/attention/zDialog/zDialog.js}"></script>-->
<scriptm type="text/javascript" th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></scriptm>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/bootstrap-table.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/locale/bootstrap-table-zh-CN.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/jQuery/jquery.serializejson.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-validator/js/bootstrapValidator.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/datetimepicker/js/bootstrap-datetimepicker.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/extensions/export/bootstrap-table-export.min.js}"></script>
<script type="text/javascript" th:src="@{/static/plugins/bootstrap-table/dist/extensions/export/tableExport.js}"></script>
<script type="text/javascript" th:inline="javascript">
    var CTX = [[@{/}]];
        var STATIC = [[@{/static/}]];
</script>
<script type="text/javascript" th:src="@{/static/modules/base/organization-manage.js}"></script>
</html>